---
name: git-master
description: |
  让 AI 的改动可追溯、可审计、可回滚。提供：提交前审查清单、变更摘要模板、分支/提交策略。
  适用：任何涉及文件改动、提交、回滚、发布前审计的任务。
  不适用：需要真实部署凭据/生产紧急操作（必须先向用户确认）。
---

# Git Master

## 核心目标
- 让每次改动都有证据链：现状 → 变更 → 验证 → 结论。

## 标准工作流
1) **变更前**：收集证据
   - `git status --porcelain`
   - `git log --oneline -10`
   - `git diff --stat`
2) **变更中**：保持最小改动
   - 禁止“顺手重构”与无关格式化。
   - 每个逻辑块完成后立刻记录：改了什么/为何/影响范围。
3) **变更后**：验证与复盘
   - 先跑最小验证，再跑全量验证。
   - 失败立即止血：回滚到上一个已知可用状态，查明根因再继续。

## 参考资料（按需加载）
- 变更摘要模板：读取 `references/change-summary-template.md`

## 推荐命令（本仓库约定）
- `/vibe/plan`：先把目标与验收写死
- `/vibe/apply`：进入写入门禁（强制审计+验证）
- `/vibe/review`：审查当前变更（给出 Approve/Request changes）

## 输出格式（强制）
- 变更摘要：文件列表 + 每个文件的目的
- 风险点：潜在回归点 + 缓解措施
- 验证结果：执行了哪些命令、结果如何

## 回滚原则
- 如果验证失败且无法快速修复：优先回滚，而不是继续堆补丁。
